package frontend

import (
	"testing"

	"{{ projectImport "internal/capitalism" }}"

	"{{ projectImport "internal/observability/logging" }}"

	"{{ projectImport "internal/database" }}"
	mockrouting "{{ projectImport "internal/routing/mock" }}"
	mocktypes "{{ projectImport "pkg/types/mock" }}"

	"github.com/stretchr/testify/mock"
)

func buildTestService(t *testing.T) *service {
	t.Helper()

	cfg := &Config{}
	logger := logging.NewNoopLogger()
	authService := &mocktypes.AuthService{}
	usersService := &mocktypes.UsersService{}
	dataManager := database.BuildMockDatabase()
	rpm := mockrouting.NewRouteParamManager()

	s := ProvideService(
		cfg,
		logger,
		authService,
		usersService,
		dataManager,
		rpm,
		capitalism.NewMockPaymentManager(),
	)

	mock.AssertExpectationsForObjects(t, authService, usersService, dataManager, rpm)

	return s.(*service)
}
